<section>
  <div class="banner">
    <h1>Moradores</h1>
    <div class="header__content">
      <div>
        <input type="text" [disabled]="!(morador$ | async)" (input)="inputValue$.next(searchInput.value)"
          (ngModelChange)="onInputChange()" [mask]="mask" [patterns]="pattern" placeholder="digite sua busca aqui..."
          #searchInput>
      </div>
      <div>
        <button class="btn__default" [disabled]="!(morador$ | async)">Filtrar<i class="fa fa-filter"></i></button>
        <button class="btn__default btn__primary" (click)="showDialog()">Novo Morador<i
            class="fas fa-user-plus"></i></button>
      </div>
    </div>
  </div>
  <mat-progress-bar color="accent" [mode]="(progressBar$ | async)?.mode" [value]="(progressBar$ | async)?.value">
  </mat-progress-bar>
  <table class="table">
    <thead [attr.disabled]="!(morador$ | async)">
      <tr [ngClass]="{ 'table__th__disabled' : !(morador$ | async) }">
        <th *ngFor="let th of thead, let i = index">{{th?.name}}<button *ngIf="i !== 6 && (morador$ | async)"
            [ngStyle]="{'opacity': th.arrowType !== 'fa-circle' ? '1' : null}" (click)="onSort(th)">
            <i class="fa {{th.arrowType}}" [ngStyle]="{'font-size': th.arrowType === 'fa-circle' ? '12px' : '14px' }"
              aria-hidden="true"></i>
          </button>
        </th>
      </tr>
    </thead>
    <tbody *ngIf="(morador$ | async)">
      <tr *ngFor="let morador of (morador$ | async), let i = index ">
        <td>{{ morador?.nome }}</td>
        <td>{{ morador?.cpf | mask: '000.000.000-00'}}</td>
        <td>{{ morador?.tel ? (morador?.tel | mask: '(00) 0000-0000') : 'N/A' }}</td>
        <td>{{ morador?.cel ? (morador?.cel| mask: '(00) 90000-0000') : 'N/A' }}</td>
        <td>{{ morador?.bloco }}</td>
        <td>{{ morador?.unidade }}</td>
        <td>
          <button (click)="showDialog(morador, true)" class="edit"><i class="fas fa-edit"></i></button>
          <button (click)="buttonAction('remove', i)"><i class="fas fa-trash"></i></button></td>
      </tr>
    </tbody>
    <div *ngIf="!(morador$ | async)">
      <i class="fa fa-list" aria-hidden="true"></i>
      <span>Nenhum morador encontrado...</span>
    </div>
  </table>
</section>
<!--  [disabled]="(option$ | async) === 'updateForm'" -->